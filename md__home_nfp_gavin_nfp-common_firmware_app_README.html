<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>NFP Example Software: nfp-common/firmware/app</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NFP Example Software
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">nfp-common/firmware/app </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Copyright (c) 2015 Gavin J Stark All rights reserved.</p>
<h2>Description</h2>
<p>This directory contains application firmware source code. An application is usually built with a single or very few C files containing the functions required by the (many) microengines in the application; in a sense these are application libraries. Then individual microengine loads have a toplevel source code file that includes the application library/libraries, and which invokes just the functions required for that microengine load.</p>
<p>All application libraries and toplevel source code should be named starting with the same application-derived prefix.</p>
<h2>Packet Capture Library</h2>
<p>The packet capture application library is initially written to be used by the pcap application firmware. It provides some low level functions, plus the application functions that make up the pcap application.</p>
<p>The library consists of the <a class="el" href="pcap__lib_8c.html" title="A simple packet capture system. ">pcap_lib.c</a> and <a class="el" href="pcap__lib_8h.html" title="A simple packet capture system. ">pcap_lib.h</a> files.</p>
<h2>pcap application MEs</h2>
<p>The pcap application ME source code provides main functions for the MEs required for a packet capture application which runs with pcap on the host.</p>
<p>The simplest application for, say, 10GbE requires one pcap_recycle, one pcap_host, and two pcap_rx (to cope with the 15Mpps of minimum sized packets).</p>
<p>Note that if the setup of the application is changed (i.e. the number of islands, MEs or threads etc) then the pcap.h header file must be changed to match so that the synchronization staging operates correctly.</p>
<h3><a class="el" href="pcap__host_8c.html" title="Packet capture host interaction. ">pcap_host.c</a></h3>
<p>The <a class="el" href="pcap__host_8c.html" title="Packet capture host interaction. ">pcap_host.c</a> code provides the simplest host DMA management for the packet capture application. This runs one master thread and seven slave threads.</p>
<p>The master thread takes MU buffers where packets are accumulated and monitors them, distributing DMA work to the slaves.</p>
<p>The slave threads perform the DMA work for masters.</p>
<p>More than one master thread can be provided in a system, with each owning a single MU buffer at any one time.</p>
<p>All the slave threads cooperate to handle the DMAs for all the masters - they communicate with a single MU work queue.</p>
<p>So the <a class="el" href="pcap__host_8c.html" title="Packet capture host interaction. ">pcap_host.c</a> code can be run on more than one ME.</p>
<h3><a class="el" href="pcap__recycle_8c.html" title="Packet capture buffer recycler (gets host buffers) ">pcap_recycle.c</a></h3>
<p>The <a class="el" href="pcap__recycle_8c.html" title="Packet capture buffer recycler (gets host buffers) ">pcap_recycle.c</a> code instantiates a single thread running the MU buffer recycler. Precisely one recycler thread is required in the system. It also runs seven slave DMA threads, to provide extra DMA capability for the DMA masters.</p>
<h3><a class="el" href="pcap__rx_8c.html" title="Packet capture receiver. ">pcap_rx.c</a></h3>
<p>The <a class="el" href="pcap__rx_8c.html" title="Packet capture receiver. ">pcap_rx.c</a> code runs eight threads of packet receive. These threads take received packets and allocate space in an MU buffer for them, and then they transfer the packet data into the MU buffer.</p>
<p>A single thread is estimated to provide about 1Mpps for small packets. So to provide line rate at 40GbE eight MEs with eight threads could provide 64 threads and 64Mpps, provide no other limits are reached. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 20 2016 15:36:17 for NFP Example Software by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
